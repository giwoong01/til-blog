---
title: 데이터베이스 커넥션 풀(Connection Pool)
description: 데이터베이스 커넥션 풀(Connection Pool)을 사용하지 않으면 어떤 문제가 발생할 수 있나요?
date: 2025-11-24
tags: [데이터베이스, 커넥션 풀]
---

데이터베이스 커넥션 풀을 사용하지 않으면 시스템의 성능, 안정성, 확장성 측면에서 문제가 발생합니다.

커넥션 풀은 데이터베이스와의 연결을 미리 만들어두고 재사용하는 기술로, 풀을 사용하지 않는다는 것은 요청이 올 때마다 새로운 연결을 생성하고 해제한다는 의미입니다.

이러한 동적 연결 생성 및 해제 과정에서 발생하는 주요 문제점은 아래와 같습니다.

### 성능 저하

요청마다 새로운 DB 연결을 설정하는 것은 시간이 오래 걸리는 작업입니다.

- 높은 지연 시간
  - DB 연결을 생성하는 과정(TCP 3-way handshake, DB 인증, 세션 생성 등)은 상당한 시간이 소요되는 I/O 작업입니다. 이 시간이 모든 사용자의 요청에 추가되므로, 애플리케이션의 응답 속도가 매우 느려집니다.
- 지속적인 부하
  - 연결을 생성하고 닫는 과정은 DB 서버와 애플리케이션 서버 모두에 지속적인 CPU 및 메모리 부하를 줍니다. 커넥션 풀을 사용하면 이 과정을 애플리케이션 시작 시 한 번만 처리하고 요청 시에는 재사용만 하면 됩니다.

### 시스템 자원 고갈

DB 연결은 유사한 서버 자원(메모리, 파일 디스크립터, 소켓 등)을 소모합니다.

- DB 서버 과부하 및 다운
  - 대부분의 DB 서버는 동시 연결 수(Max Connections)에 제한을 둡니다. 트래픽이 몰릴 경우, 수많은 새로운 연결 요청이 이 제한을 빠르게 초과하여 DB 서버가 요청을 거부하거나 다운될 수 있습니다.
- 애플리케이션 서버의 메모리 낭비
  - 연결 객체와 자원들은 메모리를 차지합니다. 풀 없이 수많은 연결을 생성하면 애플리케이션 서버의 메모리도 빠르게 고갈됩니다.
- 연결 누수 위험
  - 풀을 사용하지 않으면, 개발자가 연결을 생성한 후 close()를 호출하여 명시적으로 해제해야 합니다. 만약 예외 처리 등으로 인해 close() 호출을 놓치면, 연결이 해제되지 않고 계속 남아있는 연결 누수가 발생하여 시스템 자원 고갈을 가속화합니다.

### 확장성 및 안정성 저해

커넥션 풀이 제공하는 자원 통제력을 잃게 됩니다.

- 스레드 관리 실패
  - 웹 애플리케이션 서버(WAS)의 스레드(예: 톰캣 스레드 풀)는 보통 수백 개로 제한되는데, 이 스레드들이 DB 연결 생성 및 해제에 너무 많은 시간을 소요하거나 누수로 인해 묶여버리면 사용자 요청을 처리할 스레드가 없어집니다.
- 느린 복구
  - DB 서버가 순간적으로 장애가 났을 때, 풀이 있으면 풀 내의 연결만 잠시 비활성화 했다가 복구시 재활용할 수 있습니다. 하지만 풀이 없으면 모든 요청이 연결 시도에서 실패하며 DB 서버에 재부하를 주고 복구를 더욱 어렵게 만듭니다.
- 동시성 제어 부재
  - 커넥션 풀은 최대 연결 개수(Max Pool Size)를 설정하여 DB 서버가 처리할 수 있는 최대 동시 작업 수를 제한하는 훌륭한 안전장치 역할을 합니다. 풀이 없으면 이러한 통제력이 사라져 순간적인 트래픽 폭주에 취약해집니다.

이 외에도 시스템 설계 및 운영 측면에서도 아래와 같은 문제가 발생합니다.

### 보안 취약성 및 감사 어려움

커넥션 풀은 보안과 관리의 중앙 게이트 역할을 수행합니다. 풀이 없다면 이 역할을 잃게 됩니다.

- 반복적인 인증 정보 노출 위험
  - 풀을 사용하면 DB 연결 정보를 애플리케이션 시작 시점에만 사용하고 메모리에 안전하게 보관합니다. 풀이 없으면, 매 요청마다 DB에 연결을 시도하면서 인증 정보를 반복적으로 사용해야 하며, 이 과정에서 인증 정보가 노출되거나 로그에 불필요하렉 남을 위험이 커집니다.
- 세밀한 감사 불가능
  - 풀을 사용하면 특정 커넥션이 언제 할당되고 반환되는지, 어떤 트랜잭션이 이 커넥션을 사용했는지 풀 레벨에서 추적 및 모니터링이 가능합니다. 풀 없이 매번 새 연결이 생성되면, DB 자체의 느슨한 로그 외에는 애플리케이션 레벨에서 특정 작업의 흐름을 추적하기 어렵습니다.

### 운영 및 튜닝 통제력 상실

커넥션 풀은 시스템 자원 사용을 통제하고 최적화 하는 데 필요한 유일한 수단을 제공합니다.

- 자원 제어 불가
  - 풀의 maximumPoolSize는 DB 서버가 감당할 수 있는 최대 부하를 설정하는 스위치 역할을 합니다. 트래픽이 폭주해도 이 사이즈를 넘어서는 요청은 애플리케이션 레벨에서 대기하게 하여 DB가 과부하로 다운되는 것을 방지합니다. 풀이 없으면 이러한 보호 장치가 사라져 스파이크 트래픽에 DB가 그대로 노출됩니다.
- 활성 모니터링 데이터 부재
  - HikariCP 같은 풀 라이브러리는 현재 active connections 수, idle connections 수, connection wait time 같은 핵심 메트릭을 자동으로 제공합니다. 운영팀은 이 메트릭을 보고 병목 지점을 파악하는데, 풀이 없다면 이 필수적인 성능 데이터 자체가 존재하지 않게 됩니다.
- 웜업 문제
  - 풀은 minimumIdle 설정을 통해 항상 최소한의 커넥션을 유지시켜 둡니다. 이는 요청이 왔을 때 느린 연결 생성 과정 없이 즉시 DB 작업을 시작할 수 있도록 돕습니다. 풀이 없으면 모든 연결이 차가운 상태이므로, 첫 요청에 대한 지연 시간이 매우 길어집니다.

### 연결 누수 발생 시 위험 증폭

풀을 사용하면 연결 누수(Connection Leak)가 발생하더라도 풀이 연결을 주기적으로 확인하고 강제로 회수하거나(maxLifetime), 혹은 경고를 발생시킬 수 있습니다.

풀이 없다면, 연결을 명시적으로 close() 하지 못한 경우(예: 예외 발생 시 finally 블록 누락) 그 연결은 OS와 DB에 무기한으로 남아있게 됩니다. 이는 풀에서 발생하는 누수보다 훨씬 치명적이며, 해당 애플리케이션 서버의 재부팅만이 유일한 해결책이 될 수 있습니다. 이는 시스템의 장애 복구 시간을 극도로 늘립니다.
