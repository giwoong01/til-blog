---
title: ACID
description: ACID란 무엇인가요?
date: 2025-12-23
tags: [데이터베이스, ACID]
---

ACID는 데이터베이스 트랜잭션이 안전하게 수행됨을 보장하기 위한 4가지 필수 성질을 의미합니다.

데이터베이스 시스템이 “데이터가 깨지지 않고, 안전하게 저장된다”고 말할 수 있는 근거가 바로 이 ACID 원칙을 지키기 때문입니다.

## 1. Atomicity (원자성)

트랜잭션 내의 모든 연산은 반드시 모두 성공하거나, 아니면 모두 실패해야 한다는 원칙입니다. 부분적인 성공은 허용되지 않습니다.

- 상세 설명
  - 트랜잭션에 10개의 쿼리가 있는데 9개는 성공하고 마지막 1개가 실패했다면? 앞선 9개도 모두 취소(Rollback)되어야 합니다.
  - 이것이 없다면 데이터 불일치가 발생합니다. (예: 내 계좌에서 돈은 빠져나갔는데, 친구 계좌에는 입금되지 않는 상황)
- 구현 핵심 기술: Undo Log (언두 로그)
  - 데이터를 수정하기 전에, “변경 전의 값(Old Value)을 미리 Undo Log라는 곳에 기록해 둡니다.
  - 만약 중간에 에러가 나면, 이 로그를 보고 역순으로 복구하여 트랜잭션 시작 전 상태로 되돌립니다.

## 2. Consistency (일관성)

트랜잭션이 성공적으로 완료되면, 데이터베이스는 언제나 일관성 있는 상태를 유지해야 한다는 원칙입니다.

- 상세 설명
  - 데이터베이스에 미리 정의된 규칙을 위반하는 데이터는 저장될 수 없습니다.
  - 예를 들어 잔액 컬럼에 NOT NULL 조건이나 0 이상이어야 한다는 제약이 걸려 있다면, 트랜잭션 결과가 마이너스 잔액이 되는 경우 해당 트랜잭션은 거부되어야 합니다.
  - 또한 기본 키나 외래 키 제약조건도 트랜잭션 전후에 반드시 지켜져야 합니다.

## 3. Isolation (격리성)

여러 트랜잭션이 동시에 실행될 때, 서로의 작업에 영향을 주거나 끼어들어서는 안 된다는 원칙입니다.

- 상세 설명
  - 이론적으로 완벽한 격리성을 지키려면 트랜잭션을 하나씩 순서대로 실행해야 합니다.
  - 하지만 이는 성능상 불가능하므로, 실제로는 격리 수준을 나누어 성능과 안전성 사이에서 타협합니다.
- 구현 핵심 기술: MVCC (Multi-Version Concurrency Control) & Locks
  - Lock(잠금)을 걸어 다른 트랜잭션의 접근을 막거나, MVCC를 통해 다른 트랜잭션이 보고 있는 버전의 데이터를 따로 관리하여 서로 방해받지 않게 합니다.

## 4. Durability (지속성)

성공적으로 완료된 트랜잭션의 결과는 시스템에 전원이 나가거나 장애가 발생하더라도 영구적으로 반영되어야 한다는 원칙입니다.

- 상세 설명
  - “저장 완료되었습니다”라는 메시지를 받았다면, 그 직후 서버 코드를 뽑아도 데이터는 남아 있어야 합니다.
- 구현 핵심 기술: WAL (Write-Ahead Logging) & Redo Log
  - 데이터베이스는 성능을 위해 데이터를 메모리(Buffer)에 먼저 씁니다. 만약 이때 전원이 꺼지면 데이터가 날아갑니다.
  - 이를 방지하기 위해, 메모리에 쓰기 전에 변경 내용을 먼저 로그 파일(Redo Log)에 순차적으로 기록합니다.
  - 서버가 재부팅될 때 이 로그를 읽어 실행되지 않은 변경 사항을 다시 실행하여 데이터를 복구합니다.

## 더 알아야 할 포인트

ACID를 단순히 정의만 아는 것보다, 이를 구현하기 위해 어떤 희생이 따르는지 아는 것이 더 중요합니다.

1. 격리 수준(Isolation Level)과 성능의 트레이드오프

Isolation을 완벽하게 지키려면 동시 처리 성능이 바닥을 칩니다. 따라서 개발자는 상황에 맞춰 격리 수준을 선택해야 합니다.

- READ UNCOMMITTED: 가장 빠르지만, 엉망인 데이터(Dirty Read)를 볼 수 있음. (ACID 위반)
- READ COMMITTED: 커밋된 것만 봄 (Oracle 기본값)
- REPEATABLE READ: 트랜잭션 내내 같은 값을 봄 (MySQL 기본값)
- SERIALIZABLE: 완벽한 격리. 가장 느림.

1. Undo Log vs Redo Log

ACID를 지탱하는 두 개의 기둥입니다. 헷갈리기 쉬우니 명확히 구분해야 합니다.

- Undo Log: 원자성(A) 보장용. 롤백을 위해 과거 상태를 기록 (되돌리기용)
- Redo Log: 지속성(D) 보장용. 장애 복구를 위해 변경된 내용을 기록 (다시하기용)

1. NoSQL과 BASE

대규모 분산 시스템(NoSQL 등)에서는 엄격한 ACID를 지키기 어렵습니다. 그래서 등장한 개념이 BASE 입니다.

- Basically Available: 가용성 중시 (죽지 않음)
- Soft State: 상태가 변할 수 있음
- Eventual Consistency: 당장은 안 맞아도 결국에는 일관성이 맞춰짐
- RDBMS는 ACID를, NoSQL은 BASE를 지향한다는 차이점을 이해해야 합니다.
