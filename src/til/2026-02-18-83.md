---
title: 테스트 더블
description: 테스트 더블이란 무엇인가?
date: 2026-02-18
tags: [테스트 더블]
---

테스트 더블은 소프트웨어 테스트를 진행할 때, 실제 객체를 대신하여 사용하는 모든 대역(객체, 모듈)을 통칭하는 용어입니다.

테스트하려는 로직이 외부 API, 데이터베이스, 네트워크 등 복잡한 의존성을 가지고 있을 때, 이를 가짜 객체로 대체하여 테스트 속도를 높이고 격리된 환경을 만들기 위해 사용합니다.

## 1. 테스트 더블의 5가지 종류

테스트 더블은 역할과 복잡도에 따라 크게 5가지로 나뉩니다.

1. 더미
   - 역할: 가장 단순한 형태. “자리만 채우는 용도”입니다.
   - 특징: 객체를 전달해야 하는데 실제로는 사용되지 않을 때 씁니다.
   - 예시: 생성자의 파라미터 개수를 맞추기 위해 넘기는 null이나 빈 객체
2. 페이크
   - 역할: “동작은 하지만 프로덕션용은 아닌” 가짜 구현체입니다.
   - 특징: 실제 로직을 가지고 있지만, 단순화되어 있어 운영 환경에서는 쓸 수 없습니다.
   - 예시: 실제 Oradle DB 대신 사용하는 가벼운 H2, 또는 HashMap으로 구현한 가짜 리포지토리
3. 스텁
   - 역할: “미리 준비된 답변만 하는”객체입니다.
   - 특징: 로직은 없고, “A를 물어보면 무조건 B를 줘”라고 정해진 값만 리턴합니다.
   - 예시: “오늘은 일요일이다”라고 무조건 리턴하는 날짜 서비스 (평일 로직을 테스트하기 위해)
4. 스파이
   - 역할: “몰래 기록하는” 객체입니다.
   - 특징: 실제 객체처럼 동작하면서, 자신이 몇 번 호출되었는지, 어떤 파라미터가 넘어왔는지 등을 기록해 둡니다.
   - 예시: 이메일 발송 서비스가 실제로 메일을 보냈는지 확인하기 위해 sendCount 변수를 몰래 증가시키는 것.
5. 목
   - 역할: “행위를 검증하는”객체입니다.
   - 특징: “이 메소드가 호출되었는가?”에 집중합니다. 호출되지 않으면 테스트를 실패시킵니다.
   - 예시: “주문이 완료되면 sendEmail() 메소드가 반드시 1회 호출되어야 한다”는 기대를 설정

## 2. 사용하는 이유

1. 속도: 실제 DB나 외부 API를 호출하지 않으므로 테스트가 밀리초 단위로 끝납니다.
2. 안정성: 네트워크 장애나 외부 서버 다운과 상관 없이 항상 일관된 테스트 결과를 보장합니다.
3. 비용 절감: 문자 발송, 결제 승인 등 실제로 비용이 발생하는 로직을 돈 안 들이고 테스트할 수 있습니다.

## 정리

- 테스트 더블: 테스트를 도와주는 대역 배우들
- 종료: 자리만 채우면 Dummy, 동작하면 Fake, 답만 주면 Stub, 감시하면 Spy, 행위를 따지면 Mock
