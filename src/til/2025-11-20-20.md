---
title: 단위 테스트와 통합 테스트
description: 단위 테스트와 통합 테스트의 차이는 무엇인가요?
date: 2025-11-20
tags: [Spring Boot, Java, 단위 테스트, 통합 테스트]
---

단위 테스트와 통합테스트는 소프트웨어 테스팅의 가장 기본적이면서도 중요합니다.

이 둘의 가장 큰 차이점은 테스트의 범위(Scope)와 외부 의존성(Dependency)의 격리 여부에 있습니다.

### 1. 단위 테스트 (Unit Test)

단위 테스트는 소프트웨어의 가장 작은 단위(주로 메소드나 클래스)가 의도한 대로 정확히 동작하는지 검증하는 테스트입니다.

- 특징
  - 격리(Isolation): 테스트 대상 코드 외의 모든 의존성(데이터베이스, 네트워크, 파일 시스템 등)을 차단해야 합니다.
  - 가짜 객체(Mocking): DB나 다른 서비스가 필요하다면, 실제를 연결하는 대신 가짜 객체 (Mock, Stub)를 사용하여 “DB가 이렇게 응답했다고 가정하자”라는 식으로 테스트합니다.
  - 속도: 외부 I/O가 없으므로 실행 속도가 매우 빠릅니다. (수백 개를 돌려도 몇 초 이내)
- 목적
  - 비즈니스 로직의 알고리즘이 정확한지, 예외 처리가 잘 되는지 검증합니다.
- 도구
  - JUnit, Mockito, Spock 등

### 2. 통합 테스트 (Integration Test)

통합 테스트는 두 개 이상의 모듈(단위)이 결합해서 동작할 때, 그 상호작용이 올바른지 검증하는 테스트입니다.

- 특징
  - 연결: 실제 환경과 유사하게 스프링 컨테스트를 띄우고, 데이터베이스(DB)에도 실제로 연결합니다.
  - 검증 범위: 웹 계층(Controller)에서 서비스(Service), 저장소(Repository)를 거쳐 DB까지 데이터가 잘 흐르는지 전체적인 흐름을 봅니다.
  - 속도: 스프링을 띄우고 DB와 통신해야 하므로 단위 테스트에 비해 느립니다.
- 목적
  - 모듈 간의 인터페이스가 맞는지, SQL 쿼리가 DB에서 제대로 실행되는지, 트랜잭션이 잘 동작하는지 검증합니다.
- 도구
  - @SpringBootTest, @DataJpaTest, TestContainers, H2 Database 등

### 테스트 피라미드

테스트 피라미드라는 전략이 있습니다.

![image.png](/images/til/2025-11-20-20/1.png)

- Base (단위 테스트): 가장 빠르고 비용이 저렴하므로 가장 많이(70% 이상) 작성해야 합니다. 모든 비즈니스 로직의 분기처리를 여기서 검증합니다.
- Middle (통합 테스트): 단위 테스트보다 적게 작성합니다. DB 연결이나 외부 API 연동 등 연결이 필요한 부분 위주로 작성합니다.
- Top (E2E 테스트): 실제 사용자의 시나리오(UI 포함)를 테스트합니다. 가장 느리고 비싸므로 최소한으로 유지합니다.

### Spring 개발자의 딜레마

Spring 개발을 하다 보면 “단위 테스트만으로는 불안한데?”라는 생각이 들어 무조건 @SpringBootTest(통합 테스트)를 돌리는 경우가 많습니다.

하지만 이렇게 하면 프로젝트가 커질수록 테스트 시간이 10분, 20분으로 늘어나 개발 생산성이 급격히 떨어집니다.

- 권장 전략
  - 복잡한 비즈니스 로직(Service, Domain): 가능한 한 순수한 단위 테스트로 꼼꼼하게 검증합니다. (Mockito 적용)
  - DB 접근 로직(Repository), 복잡한 쿼리: @DataJpaTest 등을 이용해 부분 통합 테스트를 합니다.
  - 전체 흐름: 핵심 시나리오에 대해서만 통합 테스트(@SpringBootTest)를 작성하여 최종 점검합니다.
