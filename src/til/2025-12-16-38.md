---
title: 다중 서버 환경에서 세션 기반 인증 방식을 사용하는 경우 발생할 수 있는 문제점
description: 다중 서버 환경에서 세션 기반 인증 방식을 사용하는 경우 발생할 수 있는 문제점은 무엇인가요?
date: 2025-12-16
tags: [다중 서버, MSA, 세션]
---

다중 서버 환경, 특히 마이크로서비스 아키텍처(MSA)에서 세션 기반 인증 방식을 사용할 때 발생하는 가장 큰 문제는 “세션 불일치”와 “확장성의 제약”입니다.

세션 기반 인증은 기본적으로 단일 서버 환경에 최적화된 방식이기 때문에, 서버가 늘어날수록 다음과 같은 복잡하고 치명적인 문제들이 발생합니다.

## 1. 세션 불일치

사용자가 인증을 받았음에도 불구하고, 다른 서버로 요청이 전달되었을 때 인증 상태가 풀리는 현상입니다.

- 문제 상황
  1. 사용자 A가 서버 1에 로그인 → 서버 1의 로컬 메모리에 A의 세션 정보가 저장됩니다.
  2. 로드 밸런서가 다음 요청을 서버 2로 보냅니다.
  3. 서버 2는 자신의 메모리에 A의 세션 정보가 없으므로, A를 “인증되지 않은 사용자”로 판단하고 로그아웃 처리하거나 에러를 발생시킵니다.
- 해결책
  - 로드 밸런서가 한 번 접속한 사용자의 요청은 항상 동일한 서버로만 보내도록 설정하는 방식입니다.
  - 단점: 특정 서버에 부하가 집중되거나, 해당 서버가 다운되면 그 서버에 연결된 모든 사용자가 튕겨 나가는 장애 전파 위험이 있어 고가용성이 떨어집니다.

## 2. 서버 간 데이터 동기화 문제

세션 불일치 문제를 해결하기 위해 서버 간 세션을 공유하는 방식을 도입할 때 발생하는 문제입니다.

- 세션 중앙화
  - 각 서버의 로컬 메모리에 세션을 저장하는 대신, 모든 서버가 접근 가능한 외부 저장소에 세션을 모아둡니다.
  - 주요 저장소: Redis 또는 Memcached와 같은 인메모리 데이터 저장소를 사용합니다.
- 단점
  - 성능 병목: 모든 사용자 요청은 이제 외부 저장소를 거쳐야 하므로, 이 중앙 저장소가 병목 지점이 될 수 있습니다.
  - 추가 인프라 비용: 세션 관리를 위해 Redis 클러스터와 같은 고성능의 분산 시스템을 별도로 구축하고 관리해야 하는 복잡성과 비용이 발생합니다.

## 3. 수평 확장성 저하

세션 기반 인증은 기본적으로 상태 유지 방식입니다. 서버가 세션이라는 상태를 반드시 기억해야 합니다.

- 문제: 새로운 서버를 추가하거나 기존 서버를 제거할 때 유연성이 떨어집니다.
  - 새로운 서버가 추가되면 기존 서버의 세션 정보를 복사해야 하는 등의 복잡한 초기화 과정이 필요합니다.
  - 서버가 다운되면 그 서버가 가지고 있던 세션 정보(Redis를 쓰지 않을 경우)가 유실됩니다.
- 대안: 상태 비유지 방식인 “토큰 기반 인증”이 각광받는 주된 이유입니다. JWT는 서버가 아무런 상태를 저장할 필요가 없습니다.

## 4. 클라이언트 측에서의 한계 (CORS 문제)

세션 관리를 위해 사용하는 쿠키는 태생적인 한계가 있습니다.

- 교차 도메인 제한: 쿠키는 기본적으로 동일 출처에서만 전송됩니다. 프론트엔드와 백엔드 API 서버의 도메인이 다르면 쿠키 전송에 제약이 생겨 CORS 설정이 매우 복잡해집니다.

## 정리

다중 서버 환경에서 세션 기반 인증의 문제를 해결하고, 확장성을 확보하기 위한 가장 권장되는 대한은 다음과 같습니다.

- 토큰 기반 인증(JWT)
  - 서버가 세션을 저장하지 않고, 클라이언트가 토큰을 들고 다니게 함.
  - Stateless 구조로 확장 용이
- 세션 클러스터링
  - (세션 사용을 유지한다면) 모든 서버가 Redis와 같은 중앙 저장소에 세션을 공유하여 관리함.
  - 서버의 부담은 줄지만, 중앙 저장소가 병목이 될 수 있음.
