---
title: JPA의 ddl-auto 옵션 살펴보기
description: JPA의 ddl-auto 옵션은 각각 어떤 동작을 하고 어떤 상황에서 사용해야 할까요?
date: 2025-10-28
tags: [Spring Boot, JPA, ddl-auto]
---

| 옵션              | 동작 방식                                               | 특직 / 사용 시점                                    |
| ----------------- | ------------------------------------------------------- | --------------------------------------------------- |
| none              | 아무 동작 X                                             | 운영 환경에서 가장 안전한 설정                      |
| validate          | 엔티티 매핑과 DB 스키마 일치 여부만 검증                | 스키마는 직접 관리, 실행 시 매핑 오류를 조기에 탐지 |
| update            | 기존 스키마를 유지하면서 필요한 컬럼/테이블을 자동 추가 | 개발 환경에서 편리하지만, 위험 (삭제 X, 변경 O)     |
| create            | 기존 스키마를 삭제 후 새로 생성                         | 테스트나 초기 개발 단계에서 유용                    |
| create-drop       | 애플리케이션 시작 시 스키마 생성, 종료 시 삭제          | 단위 테스트, 임시 데이터용 환경에서 사용            |
| none(또는 미설정) | Hibernate가 DDL 관련 작업을 전혀 수행하지 않음          | 실제 운영 환경 기본값으로 권장됨                    |

## none

- Hibernate가 DB 스키마 관련 작업을 전혀 수행하지 않습니다.
- 운영 환경 에서는 대부분 이 옵션을 사용합니다.
- 스키마는 DBA나 Flyway/Liquibase 같은 도구로 직접 관리합니다.

```yaml
spring.jpa.hibernate.ddl-auto=none
```

> 운영 환경은 절대 Hibernate가 스키마를 건드리면 안됨.
> → 배포 시점마다 데이터 손실 위험 있음.

## validate

- 엔티티 매핑 정보(@Entity, @Column, @JoinColumn 등)가 DB 테이블 구조와 일치하는지 검증만 합니다.
- 일치하지 않으면 예외가 발생합니다.
- 스키마 변경은 직접 해줘야합니다.

```yaml
spring.jpa.hibernate.ddl-auto=validate
```

사용 상황:

- 운영 환경 또는 CI/CD 테스트 환경
- Flyway/Liquibase로 schema version 관리 중
- 잘못된 매핑을 빠르게 잡고 싶을 때

> 운영 중 schema는 직접 관리하지만, 코드-DB 매핑은 항상 맞는지 검증하고 싶다.

## update

- Hibernate가 기존 테이블 구조를 기반으로, 엔티티에 새로 추가된 필드나 테이블을 자동으로 반영합니다. (단, 기존 컬럼 삭제나 타입 변경은 하지 않음)
- 실제 테이블이 변경되므로 위험합니다.
- 초기 개발 단계에서는 편리합니다. (스키마 자동 반영)

```yaml
spring.jpa.hibernate.ddl-auto=update
```

사용 상황:

- 로컬 개발 환경 (테이블 자주 바꾸는 초기 개발 단계)
- 하지만 운영 환경에서는 절대 사용 X → 컬럼 삭제/변경 시 일관성 깨지고, 롤백 불가

## create

- 기존 스키마를 모두 DROP 후 새로 CREATE 합니다.
- 애플리케이션 시작 시마다 모든 데이터 삭제 후 다시 생성됩니다.
- 테스트용, 초기 개발용으로만 사용해야 합니다.

```yaml
spring.jpa.hibernate.ddl-auto=create
```

사용 상황:

- 단위 테스트 또는 데이터 초기화가 필요한 경우
- 실제 데이터 유지 필요 없는 환경

> 데이터 전부 날아가기 때문에 운영에서는 절대 금지

## create-drop

- create와 동일하게 시작 시 스키마를 생성합니다.
- 하지만 애플리케이션 종료 시점에 DROP을 수행합니다.

```yaml
spring.jpa.hibernate.ddl-auto=create-drop
```

사용 상황:

- 단위 테스트, 인메모리 DB(H2) 환경
- 매 실행마다 깨끗한 상태가 필요한 환경

> 예: JUnit 테스트 실행 시 매번 테이블 새로 만들어 테스트하고 끝나면 삭제

## 한 줄 요약

> ddl-auto는 Hibernate가 DB 스키마를 자동으로 생성/검증/수정할지 제어하는 설정입니다.
> 운영은 validate/none, 개발은 update, 테스트는 create-drop이 표준적인 선택입니다.
